
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Last Layer</title>
  <style>
    body {
      background: #111;
      color: #eee;
      font-family: "Georgia", serif;
      text-align: center;
      margin: 0;
    }
    .btn {
      margin: 10px;
      padding: 12px 24px;
      background: #333;
      color: #fff;
      border: none;
      border-radius: 6px;
      font-size: 1.2rem;
    }
    .log, .inventory, .skills {
      background: rgba(255, 255, 255, 0.05);
      padding: 12px;
      margin: 12px auto;
      max-width: 700px;
      border-radius: 10px;
      font-size: 1.1rem;
    }
    .item-icon {
      height: 20px;
      width: 20px;
      vertical-align: middle;
      margin-right: 8px;
    }
  </style>
</head>
<body>
<h1>Last Layer</h1>
<div id="status">HP: 20 / MP: 10</div>
<div id="log" class="log">冒険を始めよう。</div>
<div>
  <button class="btn" onclick="step()">進む</button>
  <button class="btn" onclick="showItems()">アイテム</button>
  <button class="btn" onclick="showSkills()">スキル</button>
  <button class="btn" onclick="attack()">攻撃</button>
</div>

<script>
let state = {
  hp: 20,
  mp: 10,
  inventory: ['ポーション'],
  skills: ['ヒール', 'ファイアボール']
};

function updateStatus() {
  document.getElementById("status").textContent = `HP: ${state.hp} / MP: ${state.mp}`;
}

function step() {
  log("あなたは通路を進んだ……");
}

function attack() {
  log("あなたは攻撃した！");
}

function showItems() {
  let content = "<div class='inventory'><strong>持ち物:</strong><br>";
  for (let item of state.inventory) {
    content += `<button class="btn" onclick="useItem('${item}')">${item}</button> `;
  }
  content += "</div>";
  log(content);
}

function useItem(item) {
  if (item === 'ポーション') {
    state.hp = Math.min(state.hp + 10, 20);
    log(`${item} を使ってHPを回復した！`);
    state.inventory = state.inventory.filter(i => i !== item);
    updateStatus();
  }
}

function showSkills() {
  let content = "<div class='skills'><strong>スキル:</strong><br>";
  for (let skill of state.skills) {
    content += `<button class="btn" onclick="castSkill('${skill}')">${skill}</button> `;
  }
  content += "</div>";
  log(content);
}

function castSkill(skill) {
  if (skill === 'ヒール') {
    state.hp = Math.min(state.hp + 10, 20);
    state.mp -= 3;
    log("ヒールを唱えてHPを回復した！");
  } else if (skill === 'ファイアボール') {
    state.mp -= 5;
    log("ファイアボールを放った！");
  }
  updateStatus();
}

function log(msg) {
  document.getElementById("log").innerHTML = msg;
}
</script>
</body>
</html>
